
<!DOCTYPE html>
<html lang="zh-CN">
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache"> 
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<meta HTTP-EQUIV="expires" CONTENT="0"> 
<title>ACM | LightOJ 1401 No More Tic-tac-toe 博弈论SG打表 | Amon&#39;s Homepage</title>	

<link rel="stylesheet" href="https://ccccj.github.io/styles/main.css">
<script type="text/javascript">
function getCSS()
{
        datetoday = new Date();
        timenow=datetoday.getTime();
        datetoday.setTime(timenow);
        thehour = datetoday.getHours();

            display = "https://ccccj.github.io/media/css/night.css";

            display = "https://ccccj.github.io/media/css/night.css";   
      
            display = "https://ccccj.github.io/media/css/day.css";

            display = "https://ccccj.github.io/media/css/day.css";
      

var css = '<';
        css+='link rel="stylesheet" href='+display+' \/';
        css+='>';
        document.write(css);
}
</script>
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Liu+Jian+Mao+Cao&display=swap" rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://ccccj.github.io/media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
  <script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
  <script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>wow=new WOW({boxClass:'wow',animateClass:'animated',offset:0,mobile:true,live:true});wow.init();</script>

<script type="text/javascript">
window.onload=getCSS();
</script>


 	
</head>
<body class="post-template-default single single-post postid-70 single-format-standard">
    <div id="wrapper">
        
			
		<header id="header" class="site-header" 
		
		style="background-image: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)),url(https://ccccj.github.io/post-images/acm-or-lightoj-1401-no-more-tic-tac-toe-bo-yi-lun-sg-da-biao.png)"
		
		>
			<div class="site-branding">
									<h1 class="site-title"><a href="https://ccccj.github.io" rel="home">Amon&#39;s Homepage</a></h1>
										
					<h2 class="site-description">温故而知新</h2>
										
							</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
		 
     			
<li>
	 
	<a  href="/"> home</a></li>
	
    
     			
<li>
	 
	<a  href="/archives"> archives</a></li>
	
    
     			
<li>
	 
	<a  href="https://github.com/ccccj"> github</a></li>
	
    
     			
<li>
	 
	<a  href="https://blog.csdn.net/qq_40873884"> CSDN</a></li>
	
    

</ul>
</li>		
		
</ul>				</div>
			</nav>
						<div class="jingge">


    
			
<a  href="https://twitter.com/amoncj" target="_blank" ><i class="iconfont icon-twitter"></i></a>
 
    
			
<a  href="https://github.com/ccccj" target="_blank" ><i class="iconfont icon-github"></i></a>
 
    

    
			
<a  href="https://www.facebook.com/profile.php?id=100036297907795" target="_blank" ><i class="iconfont icon-facebook"></i></a>
 
    

    

    

    
			
<a  href="https://www.instagram.com/amon_cj/" target="_blank" ><i class="iconfont icon-instagram"></i></a>
 
    
			
<a  href="839808679" target="_blank" ><i class="iconfont icon-qq"></i></a>
 
    

    

    
        </header>

		<div id="content" class="container">
			<div class="row">
	<div class="col-md-8 site-main">
				
<article id="post-70" class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">

	
	                      
		<div class="entry-content">
			<h1 class="wow swing entry-title">ACM | LightOJ 1401 No More Tic-tac-toe 博弈论SG打表</h1>
<div class="entry-meta">
<div class="wow bounce">
	<i class="iconfont icon-rili"> <time class="lately-a" datetime="2017-10-04 12:35:58" itemprop="datePublished" pubdate="">2017-10-04</time></i>
	          </div>
			
</span>
													 
		</div>
                  
			<div class="wow slideInLeft entry-summary song">
				<p><a href="http://lightoj.com/login_main.php?url=volume_showproblem.php?problem=1401">题目链接点这里</a></p>
<h3 id="no-more-tic-tac-toe">No More Tic-tac-toe</h3>
<h5 id="problem-description">Problem Description</h5>
<p>Alice was bored with the game tic-tac-toe. Usually she used to play against computer. She was so bored because, she always managed to make a tie against computer as she already became an expert in this game. She was also bored about the matching things, that means she does not like to see two adjacent 'X's or two adjacent 'O's. So Bob created a new computer game for her.<br>
Here is the description of this new 2-player game:</p>
<ol>
<li>A 1 x N grid will be given.</li>
<li>In each turn, a player can mark an unmarked cell by an 'X' or by an 'O' (it's not Zero it is big 'O').</li>
<li>No two adjacent 'X's are allowed in this game.</li>
<li>No two adjacent 'O's are allowed in this game.</li>
<li>The player who marks the last cell wins the game.<br>
Let's have an example for N = 3. Suppose first player mark the leftmost cell with an 'X'. Then the grid will look like this:</li>
</ol>
<center>
<img src="https://img-blog.csdnimg.cn/20181112211940403.png" width="30%">
<p>From this state, the winning move of the second player is to mark the rightmost cell with an 'O'.</p>
<center>
<img src="https://img-blog.csdnimg.cn/2018111221245050.png" width="30%">
<p>Now first player has no move, because in the only empty cell she cannot mark 'X' and cannot mark 'O' because the left of this cell is already marked 'X' and the right of this cell is marked 'O'. The second player will win.</p>
<p>But this is not an optimal example for first player. If in first move, the first player marks the middle cell with any one of 'X' or 'O', she will win.</p>
<p>Now about Bob's computer game, Alice always makes the first move. Alice usually used to start playing with Bob. But most often after some move, Bob gave his responsibility to the computer. Computer always plays optimally. You are given the state of the grid after Bob's departure and your task is to determine whether it is possible to win against computer from this state for Alice.</p>
<h5 id="input">Input</h5>
<p>Input starts with an integer T (≤ 10000), denoting the number of test cases.</p>
<p>Each case starts with a line containing a string which represents the state of the game after Bob's departure. Here the length of the string is N (1 ≤ N ≤ 100). In this string besides 'X' and 'O', another character '.' is used, which represents an unmarked cell.</p>
<h5 id="output">Output</h5>
<p>For each case, print the case number and 'Yes' if it is possible to win against computer, otherwise print 'No'.</p>
<h5 id="sample-input">Sample Input</h5>
<p>5<br>
...<br>
X..<br>
....O<br>
..X..<br>
O</p>
<h5 id="sample-output">Sample Output</h5>
<p>Case 1: Yes<br>
Case 2: No<br>
Case 3: No<br>
Case 4: Yes<br>
Case 5: Yes</p>
<h5 id="题意">题意：</h5>
<p>一开始没看懂题，理解错了题面，其实需要根据给出的字符串判断，现在该谁操作了，如，X 和 O 加起来，如果有偶数个，那么现在该 Alice 操作，否则该电脑操作。</p>
<h5 id="sg打表">SG打表</h5>
<p>用一个三维数组，sg[n][i][j] 来表示<br>
<img src="https://img-blog.csdnimg.cn/20181112214532122.png" alt="sg" loading="lazy"></p>
<p>如，我们用 i/j = 0 代表 <code>.</code> ， i/j = 1 代表 <code>O</code> ，i/j = 2 代表 <code>X</code>，<br>
那么 sg[3][1][2] 代表，中间有 3 个空的格子，这些格子左边是 O，右边是 X。</p>
<p>而对于 方个数 为 n 的情况，可将 X/O 放在 1-n 的任意一个格子处，每次分成了左右两边两堆格子，由于他们是独立的左右两堆格子，因此可异或得出分开后的 sg 值，最后找出没出现过的 sg 值即可。</p>
<h5 id="打表代码">打表+代码:</h5>
<pre><code class="language-c">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
using namespace std;
const int maxn = 110;

int sg[maxn][3][3]; // 0-&gt;.  1-&gt;O  2-&gt;X
int vis[maxn];

void init() {
    for (int i = 1; i &lt; maxn; ++i) {
        for (int j = 0; j &lt; 3; ++j) {
            for (int k = 0; k &lt; 3; ++k) {
                memset(vis, 0, sizeof(vis));
                for (int pos = 1; pos &lt;= i; ++pos) {
                    if (!((pos == 1 &amp;&amp; j == 1)
                          || (i == pos &amp;&amp; 1 == k))) {
                        vis[sg[pos - 1][j][1] ^ sg[i - pos][1][k]] = 1;
                        //printf(&quot;%d %d\n&quot;, sg[pos - 1][j][1], sg[i - pos][1][k]);
                    }
                    if (!((pos == 1 &amp;&amp; j == 2)
                          || (i == pos &amp;&amp; k == 2))) {
                        vis[sg[pos - 1][j][2] ^ sg[i - pos][2][k]] = 1;
                        //printf(&quot;%d %d\n&quot;, sg[pos - 1][j][2], sg[i - pos][2][k]);
                    }
                }
                for (int t = 0; ; ++t) {
                    if (vis[t] == 0) {
                        sg[i][j][k] = t;
                        //if (j &gt; 0 &amp;&amp; k &gt; 0) printf(&quot;%d %d %d %d\n&quot;, i, j, k, t);
                        break;
                    }
                }
            }
        }
    }
}

int main() {
    init();
    int t, ca = 1;
    char s[maxn];
    scanf(&quot;%d&quot;, &amp;t);
    while (t--) {
        scanf(&quot;%s&quot;, s);
        int num = 0, last = 0, lc = 0, ans = 0;
        for (int i = 0; s[i]; ++i) {
            if (s[i] != '.') {
                ++num;
                int nowc = s[i] == 'O' ? 1 : 2;
                ans ^= sg[i - last][lc][nowc];
                lc = nowc, last = i + 1;
            }
        }
        ans ^= sg[strlen(s) - last][lc][0];
        if (num % 2 == 0) {
            if (ans == 0) printf(&quot;Case %d: No\n&quot;, ca++);
            else printf(&quot;Case %d: Yes\n&quot;, ca++);
        } else {
            if (ans != 0) printf(&quot;Case %d: No\n&quot;, ca++);
            else printf(&quot;Case %d: Yes\n&quot;, ca++);
        }
    }
    return 0;
}
</code></pre>
<p>其实打完表我们就可以发现，不看两边是 <code>.</code>的情况（因为在实际用的时候，除了最边边，不会用到两边有点的情况），若最左边和最右边，一边是 X，一边是 O，那么SG 值是 0， 其余都是1，可直接找规律得出答案。</p>

							</div>
	<div class="wow bounceInDown vt-post-tags">
 
					</div>						
<nav class="navigation3 post-navigation3" role="navigation">
		
		<div class="nav-links3">
      
		<div class="wow bounceInLeft nav-previous3"><a href="https://ccccj.github.io/acm-or-hdu-1005-number-sequence/" rel="prev"> ACM | HDU 1005 Number Sequence</a></div>
		 
		 
		<div class="wow bounceInRight nav-next3"><a href="https://ccccj.github.io/acm-or-lightoj-1344-aladdin-and-the-game-of-bracelets-bo-yi-lun-sg-da-biao/" rel="next"> ACM | LightOJ - 1344 Aladdin and the Game of Bracelets博弈论SG打表</a></div>
		
		</div>
	</nav>
	<div class="wow rollIn author-info" style="visibility: visible; animation-name: rollIn;">
	<div class="author-avatar pull-left"><img src="https://ccccj.github.io/images/avatar.png" ></div>
 
	<div class="author-description"><div class="author-title"><div class="author-link" rel="author">Amon</div></div>


	<p class="author-bio">哈哈哈哈哈哈</p></div></div>
	
		</div>
		
 
		
</article>

<div id="marlin_lite_about_widget-2" class="wow bounceInUp widget marlin_lite_about_widget" data-wow-delay="0.1s">
		
        
		<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://ccccj.github.io/media/scripts/Valine.min.js'></script>

<div class="comment"></div>
<script>
        new Valine({
            // AV 对象来自上面引入av-min.js(老司机们不要开车➳♡゛扎心了老铁)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            
            admin_email:'839808679@qq.com',
            
            
      emoticon_list: ["吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"],
     	
      	
          
        });
    </script> 


   
  
 

		</div>

			</div>
			


<div class="tocc col l3 hide-on-med-and-down">
	
        <div class="toc-widget">
			
            <div class="toc-title"></div>
			
            <div id="toc-content">
			
			
			</div>
        </div>
    </div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>										 

 
       


			</div>
		</div>

		
		 	<footer id="colophon" class="site-footer">

			<div class="container">
	
				<div class="copyright">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><br>Theme:   <a href="https://github.com/shanbufun/gridea-theme-pan" target="_blank" title="Pan"><span>Pan</span></a>.  by <a href="https://shanbu.fun/" target="_blank"  title="山卜方" >Shanbufun</a></div>		
			</div>
		
		</footer>

</div>

<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>
<script type='text/javascript' src='https://ccccj.github.io/media/scripts/marlin-scripts.js'></script>
 <script src="//tokinx.github.io/lately/lately.min.js"></script>
  <script>jQuery(document).ready(function(){$.lately({'target':'.lately-a,.lately-b,.lately-c'})});</script>
  <style type="text/css">a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 40px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
}

a.back_to_top span {
    color: #888;
}

a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
}

a.back_to_top:hover span {
    color: #555;
}

@media print, screen and (max-width: 580px) {
    .back_to_top {
        display: none !important;
    }
}



</style><a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>


<script>$(document).ready((function(_this) {
  return function() {
    var bt;
    bt = $('#back_to_top');
    if ($(document).width() > 480) {
      $(window).scroll(function() {
        var st;
        st = $(window).scrollTop();
        if (st > 30) {
          return bt.css('display', 'block');
        } else {
          return bt.css('display', 'none');
        }
      });
      return bt.click(function() {
        $('body,html').animate({
          scrollTop: 0
        }, 800);
        return false;
      });
    }
  };
})(this));
</script>

		<script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $('.navigation:eq(0)').remove();
                $("").attr("rel" , "external");
                $("a[rel='external'],a[rel='external nofollow']").attr("target","_blank");
                $("a.vi").attr("rel" , "");
                $.viewImage({
                    'target'  : 'img',
                    'exclude' : '.vsmile-icons img,.gallery img',
                    'delay'   : 300
                });
                $.lately({
                    'target' : '.commentmetadata a,.infos time,.post-list time'
                });
                prettyPrint();
                
                $('ul.links li a').each(function(){
                    if($(this).parent().find('.bg').length==0){
                        $(this).parent().append('<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain='+$(this).attr("href")+')"></div>--->')
                    }
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>

</body>
</html>
